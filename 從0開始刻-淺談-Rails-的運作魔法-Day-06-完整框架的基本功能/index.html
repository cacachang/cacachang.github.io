<!DOCTYPE html><html lang="zh-TW"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>å¾0é–‹å§‹åˆ» æ·ºè«‡ Rails çš„é‹ä½œé­”æ³• - Day 06 å®Œæ•´æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ Â· NingLab</title><meta name="description" content="å»ºç«‹å¥½åŸºæœ¬çš„æ¡†æ¶åŠæ‡‰ç”¨ç¨‹å¼å¾Œæˆ‘å€‘è¦ä¾†æŠŠæ¡†æ¶åšå¾—æ›´å®Œå–„ä¸€é»å•¦ï¼


debuggingæˆ‘å€‘å…ˆå¾å»ºç«‹ debugging é–‹å§‹é€™é‚Šä¸¦ä¸æ˜¯çœŸçš„å¯« debug åŠŸèƒ½
è€Œæ˜¯å…ˆç”¨ç°¡å–®çš„æ–¹å¼ä¾†æ¨¡æ“¬ debugåœ¨ä¹‹å¾Œæˆ‘å€‘æœƒå†æ›´æ·±å…¥çš„ä»‹ç´¹
step 1 åœ¨ rainbow åŠ å…¥ debugging è¨Šæ¯1234567"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.jpeg" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/ning.jpg" style="width:200px;"><h3 title=""><a href="/">NingLab</a></h3></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/ningchang_"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/cacachang"><i class="fa fa-github"></i></a></li><li><a href="mailto:a24701770@gmail.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.instagram.com/web543_/"><i class="fa fa-instagram"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/%E7%8F%88%E5%AF%A7-%E5%BC%B5-140a86125/"><i class="fa fa-linkedin"></i></a></li></ul><div class="footer"><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">é¦–é </a></li><li><a href="/archives">æ–‡ç« </a></li><li><a href="/categories">ç›®éŒ„</a></li><li><a href="/about">é—œæ–¼ Ning</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>å¾0é–‹å§‹åˆ» æ·ºè«‡ Rails çš„é‹ä½œé­”æ³• - Day 06 å®Œæ•´æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½</a></h3></div><div class="post-content"><p>å»ºç«‹å¥½åŸºæœ¬çš„æ¡†æ¶åŠæ‡‰ç”¨ç¨‹å¼å¾Œ<br>æˆ‘å€‘è¦ä¾†æŠŠæ¡†æ¶åšå¾—æ›´å®Œå–„ä¸€é»å•¦ï¼</p>
</br>

<h2 id="debugging"><a href="#debugging" class="headerlink" title="debugging"></a>debugging</h2><p>æˆ‘å€‘å…ˆå¾å»ºç«‹ debugging é–‹å§‹<br>é€™é‚Šä¸¦ä¸æ˜¯çœŸçš„å¯« debug åŠŸèƒ½</p>
<p>è€Œæ˜¯å…ˆç”¨ç°¡å–®çš„æ–¹å¼ä¾†æ¨¡æ“¬ debug<br>åœ¨ä¹‹å¾Œæˆ‘å€‘æœƒå†æ›´æ·±å…¥çš„ä»‹ç´¹</p>
<h4 id="step-1-åœ¨-rainbow-åŠ å…¥-debugging-è¨Šæ¯"><a href="#step-1-åœ¨-rainbow-åŠ å…¥-debugging-è¨Šæ¯" class="headerlink" title="step 1 åœ¨ rainbow åŠ å…¥ debugging è¨Šæ¯"></a>step 1 åœ¨ rainbow åŠ å…¥ debugging è¨Šæ¯</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> <span class="title class_">Rainbow</span></span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Application</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call</span>(<span class="params">env</span>)</span><br><span class="line">      <span class="comment"># åŸ·è¡Œæ™‚æœƒç”¢ç”Ÿä¸€å€‹ debug.txtæª”ï¼Œä¸¦åœ¨æª”æ¡ˆä¸­å°å‡º debug</span></span><br><span class="line">      <span class="string">`echo debug &gt; debug.txt`</span></span><br><span class="line">      [</span><br><span class="line">        <span class="number">200</span>, </span><br><span class="line">        &#123;<span class="string">&#x27;Content-Type&#x27;</span> =&gt; <span class="string">&#x27;text/html&#x27;</span>&#125;,</span><br><span class="line">        [<span class="string">&quot;Hello from Ruby on Rulers!&quot;</span>]</span><br><span class="line">      ]</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ğŸ“ƒ webå°è¾­å…¸ï¼š</p>
<p>â–¶ echoï¼šèˆ‡ puts ä¸€æ¨£æ˜¯å°å‡ºçš„æ„æ€</p>
<h4 id="step-2-åˆªé™¤-rainbow-0-0-1-gem"><a href="#step-2-åˆªé™¤-rainbow-0-0-1-gem" class="headerlink" title="step 2 åˆªé™¤ rainbow-0.0.1.gem"></a>step 2 åˆªé™¤ rainbow-0.0.1.gem</h4><h4 id="step-3-é‡æ–°å®‰è£å¥—ä»¶"><a href="#step-3-é‡æ–°å®‰è£å¥—ä»¶" class="headerlink" title="step 3 é‡æ–°å®‰è£å¥—ä»¶"></a>step 3 é‡æ–°å®‰è£å¥—ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">gem build rainbow.gemspec</span></span><br><span class="line"></span><br><span class="line">  Successfully built RubyGem</span><br><span class="line">  Name: rainbow</span><br><span class="line">  Version: 0.0.1</span><br><span class="line">  File: rainbow-0.0.1.gem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">gem install rainbow-0.0.1.gem</span></span><br></pre></td></tr></table></figure>

<h4 id="step-4-åˆ°-quotations-å•Ÿç”¨-rackup-p-3001"><a href="#step-4-åˆ°-quotations-å•Ÿç”¨-rackup-p-3001" class="headerlink" title="step 4 åˆ° quotations å•Ÿç”¨ rackup -p 3001"></a>step 4 åˆ° quotations å•Ÿç”¨ rackup -p 3001</h4><p>å•Ÿå‹•å¾Œå°±æœƒå»ºç«‹ä¸€å€‹debug.txtçš„æª”æ¡ˆ</p>
<p><img src="https://i.imgur.com/Owzevzp.png"></p>
</br>

<h2 id="å»ºç«‹å‡½å¼åº«"><a href="#å»ºç«‹å‡½å¼åº«" class="headerlink" title="å»ºç«‹å‡½å¼åº«"></a>å»ºç«‹å‡½å¼åº«</h2><p>æ¥ä¸‹ä¾†æˆ‘å€‘è¦ä¾†åšã€Œé™£åˆ—ã€<br>ä½†æˆ‘å€‘ä¸åªè¦åšå‡ºä¾†<br>é‚„è¦è®“ä½¿ç”¨ Rainbow æ¡†æ¶çš„æ‡‰ç”¨ç¨‹å¼éƒ½èƒ½ç”¨ã€ŒArrayã€</p>
<h4 id="step-1-å»ºç«‹-Array-rb-æª”"><a href="#step-1-å»ºç«‹-Array-rb-æª”" class="headerlink" title="step 1 å»ºç«‹ Array.rb æª”"></a>step 1 å»ºç«‹ Array.rb æª”</h4><p>å®šç¾©ä¸€å€‹ class Array<br>åœ¨ Array ä¸­å®šç¾©å¯¦é«”æ–¹æ³•<br>Array new å‡ºä¾†çš„å¯¦é«”ç‰©ä»¶å°±å¯ä»¥ä½¿ç”¨<br>(å¯åƒè€ƒå°è¾­å…¸ä¸­çš„ç¹¼æ‰¿éˆ)</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rainbow/lib/rainbow/array.rb</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">deeply_empty?</span></span><br><span class="line">    <span class="comment"># empty? åˆ¤æ–·æ˜¯å¦ç‚ºç©º</span></span><br><span class="line">    <span class="comment"># all? åƒæ•¸éƒ½æ˜¯true å°±æœƒå›å‚³ true å¦å‰‡å›å‚³ false æˆ– nil</span></span><br><span class="line">    <span class="comment"># &amp; è½‰æˆ proc ç‰©ä»¶</span></span><br><span class="line">    <span class="comment"># å¦‚æœæ˜¯ç©ºå­—ä¸²ï¼Œæˆ–è€…æ‰€æœ‰ç‰©ä»¶éƒ½ç‚ºç©º</span></span><br><span class="line">    empty? |<span class="params"></span>| all?(&amp;<span class="symbol">:empty?</span>)</span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>ğŸ“ƒ webå°è¾­å…¸ï¼š</p>
<p>â–¶ ActiveSupportï¼šRails ä¸­çš„å·¥å…·å‡½å¼åº«ï¼Œåƒæ˜¯ Ruby çš„æ“´å……å·¥å…·<br>å¸¸è¦‹çš„ present?ã€blank?ã€presence éƒ½æ˜¯æ–¹æ³•ä¹‹ä¸€</p>
<p>â–¶ ç¹¼æ‰¿éˆï¼š<br>Obj ç‚º classA new å‡ºä¾†çš„å¯¦é«”ç‰©ä»¶ï¼Œæœƒç¹¼æ‰¿ classA çš„æ‰€æœ‰æ–¹æ³•<br>è€Œ Object ç‚º classA çš„ superclass<br>æ‰€ä»¥ classA æœƒç¹¼æ‰¿ Object çš„æ‰€æœ‰æ–¹æ³•</p>
<p>å¯ä»¥æŠŠç¹¼æ‰¿éˆæƒ³åƒæˆç¨®æ—<br>æœ€ä¸Šå±¤çš„ Object æ˜¯ classAã€Moduleã€Obj çš„é å¤ç¥–å…ˆ<br>é€™äº›å¾Œè¼©éƒ½æœƒæœ‰ä»–ç•™ä¸‹ä¾†çš„åŸºå› (æ–¹æ³•)<br>classA æ˜¯å…¶ä¸­ä¸€ç¨®ç¨®æ—ï¼Œobj å±¬æ–¼ classA ç¨®æ—<br>å› æ­¤ obj å¸¶æœ‰ classA çš„åŸºå› (æ–¹æ³•)<br>ä¾æ­¤é¡æ¨</p>
<p><img src="https://i.imgur.com/uiUj7sQ.jpg"></p>
<h4 id="step-2-è®“æ‰€æœ‰æ‡‰ç”¨ç¨‹å¼éƒ½å¯ä»¥ä½¿ç”¨é™£åˆ—æ–¹æ³•"><a href="#step-2-è®“æ‰€æœ‰æ‡‰ç”¨ç¨‹å¼éƒ½å¯ä»¥ä½¿ç”¨é™£åˆ—æ–¹æ³•" class="headerlink" title="step 2 è®“æ‰€æœ‰æ‡‰ç”¨ç¨‹å¼éƒ½å¯ä»¥ä½¿ç”¨é™£åˆ—æ–¹æ³•"></a>step 2 è®“æ‰€æœ‰æ‡‰ç”¨ç¨‹å¼éƒ½å¯ä»¥ä½¿ç”¨é™£åˆ—æ–¹æ³•</h4><p>æŠŠ Array.rb require åˆ° rainbow.rb ä¸­<br>åˆ°æ™‚å€™ gem å®‰è£çš„æ™‚å€™å°±æœƒä¸€èµ·è¼‰å…¥å›‰</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /rainbow/lib/rainbow.rb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">&quot;rainbow/array&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="step-3-åˆªé™¤-rainbow-0-0-1-gem"><a href="#step-3-åˆªé™¤-rainbow-0-0-1-gem" class="headerlink" title="step 3 åˆªé™¤ rainbow-0.0.1.gem"></a>step 3 åˆªé™¤ rainbow-0.0.1.gem</h4><h4 id="step-4-git-add"><a href="#step-4-git-add" class="headerlink" title="step 4 git add ."></a>step 4 git add .</h4><p>éœ€è¦åœ¨é€™é‚ŠæŠŠæª”æ¡ˆæ”¾åˆ° git æš«å­˜å€æ˜¯å› ç‚º</p>
<p>rainbow.gemspec æœƒå« git å»æ‰¾æˆ‘å€‘çš„ gem åŒ…å«å“ªäº›æª”æ¡ˆ</p>
<p>è®“æˆ‘å€‘ä¾†çœ‹çœ‹ gemspec æª”æ¡ˆ</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spec.files = <span class="title class_">Dir</span>.chdir(__dir__) <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># æŠŠ git è¿½è¹¤çš„æ‰€æœ‰æª”æ¡ˆé€å­—åˆ—å‡ºï¼Œç›´åˆ°NULå‡ºç¾ï¼Œå†åšå¾Œé¢çš„æ–¹æ³•(splitã€reject)</span></span><br><span class="line">  <span class="string">`git ls-files -z`</span>.split(<span class="string">&quot;\x0&quot;</span>).reject <span class="keyword">do</span> |<span class="params">f</span>|</span><br><span class="line">     (f == <span class="variable constant_">__FILE__</span>) |<span class="params"></span>| f.match(<span class="regexp">%r&#123;\A(?:(?:bin|test|spec|features)/|\.(?:git|travis|circleci)|appveyor)&#125;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h4 id="step-5-é‡æ–°å®‰è£å¥—ä»¶"><a href="#step-5-é‡æ–°å®‰è£å¥—ä»¶" class="headerlink" title="step 5 é‡æ–°å®‰è£å¥—ä»¶"></a>step 5 é‡æ–°å®‰è£å¥—ä»¶</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">gem build rainbow.gemspec</span></span><br><span class="line"></span><br><span class="line">  Successfully built RubyGem</span><br><span class="line">  Name: rainbow</span><br><span class="line">  Version: 0.0.1</span><br><span class="line">  File: rainbow-0.0.1.gem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">gem install rainbow-0.0.1.gem</span></span><br></pre></td></tr></table></figure>

<h4 id="step-4-æ¸¬è©¦-array"><a href="#step-4-æ¸¬è©¦-array" class="headerlink" title="step 4 æ¸¬è©¦ array"></a>step 4 æ¸¬è©¦ array</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /quotations/array.rb</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">p a.sum <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

</br>

<h2 id="æ¸¬è©¦æª”"><a href="#æ¸¬è©¦æª”" class="headerlink" title="æ¸¬è©¦æª”"></a>æ¸¬è©¦æª”</h2><h4 id="step-1-åœ¨-gemspec-æª”æ¡ˆåŠ å…¥æ¸¬è©¦èªæ³•"><a href="#step-1-åœ¨-gemspec-æª”æ¡ˆåŠ å…¥æ¸¬è©¦èªæ³•" class="headerlink" title="step 1 åœ¨ gemspec æª”æ¡ˆåŠ å…¥æ¸¬è©¦èªæ³•"></a>step 1 åœ¨ gemspec æª”æ¡ˆåŠ å…¥æ¸¬è©¦èªæ³•</h4><p>æˆ‘å€‘ç›®å‰åœ¨é–‹ç™¼ä»¥ Rack ç‚ºåŸºåº•çš„å¥—ä»¶<br>ä½¿ç”¨ rack-test æœƒè®“æ¸¬è©¦æ›´æ–¹ä¾¿</p>
<p>åˆ° gemspec åŠ å…¥ä¸‹åˆ—å…©å€‹æ¸¬è©¦å·¥å…·</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spec.add_development_dependency <span class="string">&quot;rack-test&quot;</span></span><br><span class="line">spec.add_development_dependency <span class="string">&quot;minitest&quot;</span></span><br></pre></td></tr></table></figure>

<p>ğŸ“ƒ webå°è¾­å…¸ï¼š</p>
<p>â–¶ rack-test: è¼•é‡åˆç°¡å–®çš„ Rack æ¸¬è©¦ APIï¼Œå¯ä½¿ç”¨ cookie jar å‚³é€requestã€æŒçºŒå‚³é€ requestç­‰</p>
<p>â–¶ minitest: è¼•é‡åˆå¿«é€Ÿçš„æ¸¬è©¦æ¡†æ¶ï¼Œæä¾›è±å¯Œçš„æ–·è¨€<br>ï¼ˆæ–·è¨€æŒ‡çš„æ˜¯æ¸¬è©¦çš„åˆ¤æ–·çµæœï¼‰ï¼Œè®“æ¸¬è©¦çµæœç°¡å–®åˆå¥½è®€</p>
<p>å¿˜è¨˜ gemspec åœ¨å¹¹å˜›äº†å—ï¼Ÿ<a href="https://ninglab.com/2022/08/16/%E5%BE%9E0%E9%96%8B%E5%A7%8B%E5%88%BB-%E6%B7%BA%E8%AB%87-Rails-%E7%9A%84%E9%81%8B%E4%BD%9C%E9%AD%94%E6%B3%95-Day03-GEM/">é»æˆ‘å›æƒ³</a></p>
<h4 id="step-2-bundle-install"><a href="#step-2-bundle-install" class="headerlink" title="step 2 bundle install"></a>step 2 bundle install</h4><p>åªè¦ gemspec æœ‰åšä¿®æ”¹<br>å°±è¦ç”¨ bundle install<br>é¿å…å‰›åŠ å…¥çš„å¥—ä»¶æ²’åŠ åˆ°</p>
<h4 id="step-3-æ–°å¢-test-è³‡æ–™å¤¾åŠ-test-helper"><a href="#step-3-æ–°å¢-test-è³‡æ–™å¤¾åŠ-test-helper" class="headerlink" title="step 3 æ–°å¢ test è³‡æ–™å¤¾åŠ test_helper"></a>step 3 æ–°å¢ test è³‡æ–™å¤¾åŠ test_helper</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /rainbow</span></span><br><span class="line">&gt; mkdir test</span><br><span class="line">&gt; cd test</span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /rainbow/test</span></span><br><span class="line">&gt; test_helper.rb</span><br></pre></td></tr></table></figure>

<p>åšæ¸¬è©¦æœƒéœ€è¦ç”¨åˆ°æ¸¬è©¦å·¥å…·<br>æ¥ä¸‹ä¾†æˆ‘å€‘å°±æŠŠ rack&#x2F;test è·Ÿ minitest é€™å…©å€‹æ¸¬è©¦å·¥å…·è¼‰å…¥</p>
<p>èªæ³•è§£é‡‹ï¼š</p>
<p>â–¶ LOAD_PATH æ˜¯ Ruby ç”¨ä¾†å­˜æ”¾æª”æ¡ˆè·¯å¾‘çš„æ¨¡çµ„<br>ç•¶æ¥æ”¶åˆ° request è«‹æ±‚æ™‚<br>Ruby å°±æœƒå»æœå°‹åŒæ¨£åå­—çš„æª”æ¡ˆä¸¦è¼‰å…¥</p>
<p>â–¶ expand_path æœƒæŠŠç›¸å°è·¯å¾‘è½‰æ›æˆçµ•å°è·¯å¾‘ï¼Œç•¶æª”æ¡ˆæœ‰ä»»ä½•è®Šå‹•æ™‚ï¼Œæ¯”è¼ƒä¸æœƒæ‰¾éŒ¯æª”æ¡ˆ</p>
<p>â–¶ <strong>FILE</strong> æœƒæŠŠå‰é¢åƒæ•¸çš„è·¯å¾‘å®Œæ•´ç§€å‡ºä¾†</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$LOAD_PATH</span>.unshift <span class="title class_">File</span>.expand_path(<span class="string">&quot;../../lib&quot;</span>, <span class="variable constant_">__FILE__</span>)</span><br><span class="line"><span class="keyword">require</span> <span class="string">&quot;rulers&quot;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&quot;rack/test&quot;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&quot;minitest/autorun&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="step-5-æ–°å¢-application-test-rb-ä¸¦åŠ å…¥æ¸¬è©¦èªæ³•"><a href="#step-5-æ–°å¢-application-test-rb-ä¸¦åŠ å…¥æ¸¬è©¦èªæ³•" class="headerlink" title="step 5 æ–°å¢ application_test.rb ä¸¦åŠ å…¥æ¸¬è©¦èªæ³•"></a>step 5 æ–°å¢ application_test.rb ä¸¦åŠ å…¥æ¸¬è©¦èªæ³•</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /rainbow/test/application_test.rb</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾è³‡æ–™å¤¾ä¸­ç¢ºèªæ˜¯å¦æœ‰ test_helperï¼Œè€Œä¸æ¡ç”¨ LOAD_PATH å»æ‰¾</span></span><br><span class="line">require_relative <span class="string">&quot;test_helper&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestApp</span> &lt; <span class="title class_ inherited__">Rulers::Application</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RulersAppTest</span> &lt; <span class="title class_ inherited__">Minitest::Test</span></span><br><span class="line">  <span class="keyword">include</span> <span class="title class_">Rack::Test::Methods</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">app</span></span><br><span class="line">    <span class="title class_">TestApp</span>.new</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">test_request</span></span><br><span class="line">    get <span class="string">&quot;/&quot;</span></span><br><span class="line">    assert last_response.ok?</span><br><span class="line">    body = last_response.body</span><br><span class="line">    assert body[<span class="string">&quot;Hello&quot;</span>]</span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h4 id="step-6-è·‘æ¸¬è©¦"><a href="#step-6-è·‘æ¸¬è©¦" class="headerlink" title="step 6 è·‘æ¸¬è©¦"></a>step 6 è·‘æ¸¬è©¦</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; ruby test/application_test.rb</span><br><span class="line"></span><br><span class="line"><span class="comment"># Running:</span></span><br><span class="line"></span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"><span class="title class_">Finished</span> <span class="keyword">in</span> <span class="number">0</span>.019610s, <span class="number">50.9944</span> runs/s, <span class="number">101.9888</span> assertions/s.</span><br><span class="line"><span class="number">1</span> runs, <span class="number">2</span> assertions, <span class="number">0</span> failures, <span class="number">0</span> errors, <span class="number">0</span> skips </span><br></pre></td></tr></table></figure>

</br>

<h2 id="ä½¿ç”¨å…¶ä»–-server"><a href="#ä½¿ç”¨å…¶ä»–-server" class="headerlink" title="ä½¿ç”¨å…¶ä»– server"></a>ä½¿ç”¨å…¶ä»– server</h2><p>æˆ‘å€‘ç›®å‰ä½¿ç”¨çš„æ˜¯ Ruby å…§å»ºçš„ server(WEBRick)<br>ä½†é è¨­çš„ WEBRick ä¸¦ä¸æœƒåŒæ­¥æ”¹è®Šé¡¯ç¤ºç•«é¢<br>æ‰€ä»¥æ¯æ¬¡è®Šæ›´éƒ½è¦é‡å•Ÿ server</p>
<p>æˆ‘å€‘å¯ä»¥ç”¨å…¶ä»– Application Server ä»£æ›¿</p>
<p>Unicorn æœƒè‡ªå‹•å»å°‹æ‰¾ config.ru æª”ä¸¦å»ºç«‹èµ· server<br>æˆ‘å€‘å°±ä¾†ç”¨ Unicorn å§</p>
<h4 id="step-1"><a href="#step-1" class="headerlink" title="step 1"></a>step 1</h4><p>å®‰è£ Unicorn</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; gem install unicorn</span><br><span class="line"></span><br><span class="line"><span class="title class_">Fetching</span> unicorn-<span class="number">6.1</span>.<span class="number">0</span>.gem</span><br><span class="line"><span class="title class_">Fetching</span> kgio-<span class="number">2.11</span>.<span class="number">4</span>.gem</span><br><span class="line"><span class="title class_">Fetching</span> raindrops-<span class="number">0.20</span>.<span class="number">0</span>.gem</span><br><span class="line"><span class="title class_">Building</span> native extensions. <span class="title class_">This</span> could take a <span class="keyword">while</span>...</span><br><span class="line"><span class="title class_">Successfully</span> installed kgio-<span class="number">2.11</span>.<span class="number">4</span></span><br><span class="line">....</span><br><span class="line"><span class="number">3</span> gems installed</span><br></pre></td></tr></table></figure>


<h4 id="step-4-é‡å•Ÿserver"><a href="#step-4-é‡å•Ÿserver" class="headerlink" title="step 4 é‡å•Ÿserver"></a>step 4 é‡å•Ÿserver</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unicorn -p 3001</span><br></pre></td></tr></table></figure>
</br>

<p>ğŸ“ƒ webå°è¾­å…¸</p>
<p>â–¶ Application Server: åœ¨å‚³é€ HTTP request æ™‚ï¼Œç”¨ä¾†å®‰è£ã€é‹ä½œã€åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼çš„æœå‹™</p>
<p>â–¶ HTTP request æµç¨‹åœ–</p>
<p><img src="https://i.imgur.com/ciCvdM6.jpg"></p>
</br>

<h2 id="æ’é™¤ç‰ˆæ§"><a href="#æ’é™¤ç‰ˆæ§" class="headerlink" title="æ’é™¤ç‰ˆæ§"></a>æ’é™¤ç‰ˆæ§</h2><p>ä¸€é–‹å§‹å®‰è£ rainbow æ™‚<br>æœƒé€çµ¦æˆ‘å€‘ä¸€å€‹ .gitignore æª”</p>
<p>.gitignore æª” ä¸»è¦æ˜¯æ”¶éŒ„ä¸æƒ³é€²ç‰ˆæ§çš„æª”æ¡ˆ<br>èˆ‰å‡¡é‡‘é‘°ã€å¥—ä»¶çš„æª”æ¡ˆ(rainbow-0.0.1.gem)</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rainbow-*.gem</span><br></pre></td></tr></table></figure>

</br>

<p>åƒè€ƒæ–‡ç»<br><a target="_blank" rel="noopener" href="https://guides.rubyonrails.org/active_support_core_extensions.html">https://guides.rubyonrails.org/active_support_core_extensions.html</a><br><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-ls-files">https://git-scm.com/docs/git-ls-files</a><br><a target="_blank" rel="noopener" href="https://github.com/rack/rack-test">https://github.com/rack/rack-test</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/31270461/what-is-the-difference-between-cookie-and-cookiejar">https://stackoverflow.com/questions/31270461/what-is-the-difference-between-cookie-and-cookiejar</a><br><a target="_blank" rel="noopener" href="https://webapps-for-beginners.rubymonstas.org/libraries/load_path.html">https://webapps-for-beginners.rubymonstas.org/libraries/load_path.html</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/224379/what-does-file-mean-in-ruby">https://stackoverflow.com/questions/224379/what-does-file-mean-in-ruby</a><br><a target="_blank" rel="noopener" href="https://www.educba.com/what-is-application-server/">https://www.educba.com/what-is-application-server/</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2022-08-22</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Rebuild-Rails/" title="Rebuild Rails">Rebuild Rails </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://ninglab.com/å¾0é–‹å§‹åˆ»-æ·ºè«‡-Rails-çš„é‹ä½œé­”æ³•-Day-06-å®Œæ•´æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½/,NingLab,å¾0é–‹å§‹åˆ» æ·ºè«‡ Rails çš„é‹ä½œé­”æ³• - Day 06 å®Œæ•´æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½,;"></a></div></div><div><script src="https://utteranc.es/client.js" repo="cacachang/cacachang.github.io" issue-term="title" theme="github-light" crossorigin="anonymous" async></script></div><div><script type="text/javascript">document.write("<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/a24701770/button?referrer=" + encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");</script></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/%E5%BE%9E0%E9%96%8B%E5%A7%8B%E5%88%BB-%E6%B7%BA%E8%AB%87-Rails-%E7%9A%84%E9%81%8B%E4%BD%9C%E9%AD%94%E6%B3%95-Day-07-%E5%BB%BA%E7%AB%8B-Controller/" title="å¾0é–‹å§‹åˆ» æ·ºè«‡ Rails çš„é‹ä½œé­”æ³• - Day 07 å»ºç«‹ Controller">ä¸Šä¸€ç¯‡</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/Rails-my-practice-for-model/" title="Rails å¯¦ä½œæ‡‰ç”¨ - Model ç¯‡">ä¸‹ä¸€ç¯‡</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>