<!DOCTYPE html><html lang="zh-TW"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>Basic - 環境變數 · NingLab</title><meta name="description" content="什麼是環境變數？在我們開始之前，讓我們先了解環境是什麼 
環境環境是指 operating system 或 microservice，例如我們常用的終端機。 
變數在任何程式語言中，我們有兩個基本元素：常數和變數 他被會由一個 key 跟 value 配對而成 
常數：在執行期間不會被改變及重新定"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><script async src="https://www.googletagmanager.com/gtag/js?id=G-4P2R013PGL"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4P2R013PGL')
</script><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.jpeg" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/ning.jpg" style="width:200px;"><h3 title=""><a href="/">NingLab</a></h3></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/ningchang_"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/cacachang"><i class="fa fa-github"></i></a></li><li><a href="mailto:a24701770@gmail.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.instagram.com/web543_/"><i class="fa fa-instagram"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/cacachang/"><i class="fa fa-linkedin"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UCwRiNPzYITZWaif23HTmHZQ"><i class="fa fa-youtube"></i></a></li></ul><div class="footer"><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首頁</a></li><li><a href="/archives">文章</a></li><li><a href="/categories">目錄</a></li><li><a href="/about">關於 Ning</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Basic - 環境變數</a></h3></div><div class="post-content"><h2 id="什麼是環境變數？"><a href="#什麼是環境變數？" class="headerlink" title="什麼是環境變數？"></a>什麼是環境變數？</h2><p>在我們開始之前，讓我們先了解環境是什麼 </p>
<h3 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h3><p>環境是指 operating system 或 microservice，例如我們常用的終端機。 </p>
<h3 id="變數"><a href="#變數" class="headerlink" title="變數"></a>變數</h3><p>在任何程式語言中，我們有兩個基本元素：常數和變數 他被會由一個 key 跟 value 配對而成 </p>
<p>常數：在執行期間不會被改變及重新定義（不過在某些語言中可能會被改變）<br>變數：在執行期間更改和重新定義 常數和變數在記憶體空間會被配專屬的位置 </p>
<h3 id="何時使用環境變數？"><a href="#何時使用環境變數？" class="headerlink" title="何時使用環境變數？"></a>何時使用環境變數？</h3><p>每個環境中都會有預設的環境變數 通常用於存放服務的用戶名及密碼、API路徑和其他機密資料<br>application 在初始化期間載入這些環境變數<br>在運行期間，key 會被替換為對應的 value，我們就可以輕鬆且安全地使用服務 </p>
<h3 id="如何使用環境變數？"><a href="#如何使用環境變數？" class="headerlink" title="如何使用環境變數？"></a>如何使用環境變數？</h3><p>我們先來查看系統中已經存在的環境變數 </p>
<p>在終端機中下指令： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo $PATH</span><br></pre></td></tr></table></figure>

<p>顯示 PATH 環境變數的 value： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx/.rvm/gems/ruby-3.2.2/bin:xxx/.rvm/gems/ruby-3.2.2@global/bin:/xxx/.rvm/rubies/ruby-3.2.2/bin </span><br></pre></td></tr></table></figure>

<p>接下來，我們使用 export 來設置環境變數： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; export PASSWORD=password </span><br></pre></td></tr></table></figure>

<p>要顯示 PASSWORD 變數的值，我們一樣使用： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo $PASSWORD </span><br></pre></td></tr></table></figure>

<p>這樣我們就成功設定了自定義的環境變數 </p>
<p>接下來想額外分享一個指令 </p>
<p>我們可以針對特定的環境設定環境變數，用以下指令： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; PASSWORD=password irb </span><br></pre></td></tr></table></figure>

<p>在 irb 中查看我們剛剛設定的環境變數： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; ENV[&quot;PASSWORD&quot;] # password </span><br></pre></td></tr></table></figure>

<h3 id="設定預設環境變數"><a href="#設定預設環境變數" class="headerlink" title="設定預設環境變數"></a>設定預設環境變數</h3><p>透過 export 或者在變數定義後加上特定的環境來設定環境變數，設定只能在當下的工作階段，一旦離開，就得重新設定環境變數。 </p>
<p>要確保環境變數存在於每個工作階段，我們需要在 .zshrc 或 .bashrc 檔案中進行配置。 </p>
<p>打開 zshrc 或 .bashrc 檔案（已有事先設定環境變數 EDITOR 為 code，還沒設定的話可以按照上個步驟去設定） </p>
<p>以 zshrc 為例， bashrc 也可以照做： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; code ~/.zshrc </span><br></pre></td></tr></table></figure>

<p>在 zshrc 檔案的最下面加環境變數並且儲存檔案： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; export PASSWORD=password </span><br></pre></td></tr></table></figure>

<p>接下來開一個新的終端機，並查看環境變數： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo $PASSWORD # password </span><br></pre></td></tr></table></figure>

<p>以上就完成設定了 </p>
<h3 id="在應用程序中設置環境變數"><a href="#在應用程序中設置環境變數" class="headerlink" title="在應用程序中設置環境變數"></a>在應用程序中設置環境變數</h3><p>在不影響系統的環境變數下，該怎麼針對個別應用程式設定環境變數，有些套件可以幫我們達成這件事 以 dotenv 為例，我們只需在 .env 文件中放置一組變數。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># .env.development.local </span><br><span class="line"></span><br><span class="line"># service </span><br><span class="line">HOSTNAME=127.0.0.1:3000 </span><br></pre></td></tr></table></figure>

<p>在 application，我們可以使用這段程式碼來存取環境變數： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENV[&quot;HOSTNAME&quot;] </span><br></pre></td></tr></table></figure>

<p>不過如果是要部署正式環境中，就必須要在各別環境中做設定，如何設定須取決於各個服務<br>之後會再介紹環境變數更詳細的內容 </p>
<h2 id="English-Version"><a href="#English-Version" class="headerlink" title="English Version"></a>English Version</h2><h2 id="What-is-environment-variable"><a href="#What-is-environment-variable" class="headerlink" title="What is environment variable?"></a>What is environment variable?</h2><p>Before we start, let’s understand the concept of environment.</p>
<p><img src="https://hackmd.io/_uploads/SyyEno5wn.jpg"></p>
<h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>An Environment can refer to operating system or microservice, such as terminal that commonly used by developers, where commands can be executed.</p>
<h2 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h2><p>In any computer programming language, there are two fundamental components, constants and variables.</p>
<p>they are defined by a pair of key and value.</p>
<p>Constants remain unchanged when programming executing.<br>(however, it may changed in some language if you go out of your way to modify setting)</p>
<p>Variables can be modified and reassigned during program execution.</p>
<p>Both represent unique locations stored data and value in memory.</p>
<h2 id="When-do-we-use-environment-variable"><a href="#When-do-we-use-environment-variable" class="headerlink" title="When do we use environment variable?"></a>When do we use environment variable?</h2><p>Environment variable are predefined in each environment.</p>
<p>They are commonly used to store user name and password of service, API paths, even sensitive data.</p>
<p>Application loaded these environment variables during initialization.</p>
<p>During runtime, the keys are replaced with current values, enable us to access service easily while ensuring security.</p>
<h2 id="How-do-we-use-them"><a href="#How-do-we-use-them" class="headerlink" title="How do we use them?"></a>How do we use them?</h2><p>First, let’s check environmant variable which already present in system.</p>
<p>use the following command in terminal:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo $PATH</span><br></pre></td></tr></table></figure>
<p>The value of PATH(environment variable) as shown below.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx/.rvm/gems/ruby-3.2.2/bin:xxx/.rvm/gems/ruby-3.2.2@global/bin:/xxx/.rvm/rubies/ruby-3.2.2/bin</span><br></pre></td></tr></table></figure>

<p>Next, we use export command to set environment variable</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; export PASSWORD=password</span><br></pre></td></tr></table></figure>
<p>It’s will display PASSWORD’s value when we use command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo $PASSWORD</span><br></pre></td></tr></table></figure>
<p>By doing so, we have successfully set up a custom environment variable.</p>
<p>But I want to share another command with you.</p>
<p>We can add environment after variable assignment, setting key-value pair within within a specific environment.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; PASSWORD=password irb</span><br></pre></td></tr></table></figure>

<p>once we enter the following command in irb, value will display.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; ENV[&quot;PASSWORD&quot;]</span><br><span class="line"></span><br><span class="line"># password</span><br></pre></td></tr></table></figure>

<p>In the given situation, the steps are primarily for development purposes.</p>
<h2 id="Setting-default-environment-variable"><a href="#Setting-default-environment-variable" class="headerlink" title="Setting default environment variable"></a>Setting default environment variable</h2><p>We can set environment variable with command export or add specific environment after variable assignment, which only present in current session.</p>
<p>then, how to set default environment variable that persist in each session?</p>
<p>At beginning, we need to add environment variable in zshrc file or .bashrc</p>
<p>open .bashrc or .zshrc file (I have previously set <code>EDITOR</code> as key and paired with value code in environment, you can try to follow the instruction provided earlier to set environment variable)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; code ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>put setting in the end of the file and save the file</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; export PASSWORD=password</span><br></pre></td></tr></table></figure>

<p>Now, you can see the environment variable in every session</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo $PASSWORD</span><br></pre></td></tr></table></figure>

<h2 id="Set-environment-variable-in-application"><a href="#Set-environment-variable-in-application" class="headerlink" title="Set environment variable in application"></a>Set environment variable in application</h2><p>Package like dotenv can help us achieve the feature without affecting environment variable in system.</p>
<p>Using dotenv as an example, we can simply use it just put a bunch of variables in an <code>.env</code> file.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># .env.development.local</span><br><span class="line"></span><br><span class="line"># server</span><br><span class="line">HOSTNAME=127.0.0.1:3000</span><br></pre></td></tr></table></figure>

<p>In application, we can access environment variables using the code.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENV[&quot;HOSTNAME&quot;]</span><br></pre></td></tr></table></figure>
<p>If we want to deploy the application to a specific platform, we’ll need to make further settings.</p>
<p>We will introduce deeper concept of environment variable in the remaining article, see u soon.</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2024-02-22</span><i class="fa fa-tag"></i><a class="tag" href="/categories/程式通識/" title="程式通識">程式通識 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://ninglab.com/Basic-environment-variable/,NingLab,Basic - 環境變數,;"></a></div></div><div><script src="https://utteranc.es/client.js" repo="cacachang/cacachang.github.io" issue-term="title" theme="github-light" crossorigin="anonymous" async></script></div><div><script type="text/javascript">document.write("<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/a24701770/button?referrer=" + encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");</script></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/Docker-docker-introduce/" title="Docker - 一起探索大鯨魚的奧妙">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/Postgresql-different-between-json-and-jsonb/" title="Postgresql - JSONB 是什麼？跟 JSON 有什麼差別？">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>