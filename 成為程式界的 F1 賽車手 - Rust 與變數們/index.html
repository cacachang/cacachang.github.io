<!DOCTYPE html><html lang="zh-TW"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>成為程式界的 F1 賽車手 - Rust 與變數們 · NingLab</title><meta name="description" content="淺談 Rust 淵源Rust 是由 Mozilla 主導開發
Rust 本來是 Mozilla 員工 Graydon Hoare 的 side project
後來 Mozilla 開始支持這個專案，在 2010 年公開
並於 2015 年釋出第一個穩定版本
截至 2024 年 8 月已釋出 1.8"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><script async src="https://www.googletagmanager.com/gtag/js?id=G-4P2R013PGL"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4P2R013PGL')
</script><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.jpeg" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/ning.jpg" style="width:200px;"><h3 title=""><a href="/">NingLab</a></h3></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/ningchang_"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/cacachang"><i class="fa fa-github"></i></a></li><li><a href="mailto:a24701770@gmail.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.instagram.com/web543_/"><i class="fa fa-instagram"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/%E7%8F%88%E5%AF%A7-%E5%BC%B5-140a86125/"><i class="fa fa-linkedin"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UCwRiNPzYITZWaif23HTmHZQ"><i class="fa fa-youtube"></i></a></li></ul><div class="footer"><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首頁</a></li><li><a href="/archives">文章</a></li><li><a href="/categories">目錄</a></li><li><a href="/about">關於 Ning</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>成為程式界的 F1 賽車手 - Rust 與變數們</a></h3></div><div class="post-content"><h3 id="淺談-Rust-淵源"><a href="#淺談-Rust-淵源" class="headerlink" title="淺談 Rust 淵源"></a>淺談 Rust 淵源</h3><p>Rust 是由 Mozilla 主導開發</p>
<p>Rust 本來是 Mozilla 員工 Graydon Hoare 的 side project</p>
<p>後來 Mozilla 開始支持這個專案，在 2010 年公開</p>
<p>並於 2015 年釋出第一個穩定版本</p>
<p>截至 2024 年 8 月已釋出 1.80.1 穩定版</p>
<p>Rust 在 stack overflow 的 2024 年調查中，Rust 被列為最讚賞的語言之一</p>
<p>Rust 的高效能特性，讓許多的工具都掀起以 Rust 的改寫風潮</p>
<h3 id="該怎麼安裝"><a href="#該怎麼安裝" class="headerlink" title="該怎麼安裝"></a>該怎麼安裝</h3><p>本系列文章將以 MacOS 為主</p>
<p>官方推薦使用 rustup 來安裝， Window 需要另行安裝</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">info: downloading installer</span><br><span class="line"></span><br><span class="line">Welcome to Rust!</span><br><span class="line"></span><br><span class="line">This will download and install the official compiler for the Rust</span><br><span class="line">programming language, and its package manager, Cargo.</span><br><span class="line"></span><br><span class="line">Rustup metadata and toolchains will be installed into the Rustup</span><br><span class="line">home directory, located at:</span><br><span class="line"></span><br><span class="line">  /Users/zhangjianing/.rustup</span><br><span class="line"></span><br><span class="line">This can be modified with the RUSTUP_HOME environment variable.</span><br><span class="line"></span><br><span class="line">The Cargo home directory is located at:</span><br><span class="line"></span><br><span class="line">  /Users/zhangjianing/.cargo</span><br><span class="line"></span><br><span class="line">This can be modified with the CARGO_HOME environment variable.</span><br><span class="line"></span><br><span class="line">The cargo, rustc, rustup and other commands will be added to</span><br><span class="line">Cargo&#x27;s bin directory, located at:</span><br><span class="line"></span><br><span class="line">  /Users/zhangjianing/.cargo/bin</span><br><span class="line"></span><br><span class="line">This path will then be added to your PATH environment variable by</span><br><span class="line">modifying the profile files located at:</span><br><span class="line"></span><br><span class="line">  /Users/zhangjianing/.profile</span><br><span class="line">  /Users/zhangjianing/.bash_profile</span><br><span class="line">  /Users/zhangjianing/.bashrc</span><br><span class="line">  /Users/zhangjianing/.zshenv</span><br><span class="line"></span><br><span class="line">You can uninstall at any time with rustup self uninstall and</span><br><span class="line">these changes will be reverted.</span><br><span class="line"></span><br><span class="line">Current installation options:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   default host triple: aarch64-apple-darwin</span><br><span class="line">     default toolchain: stable (default)</span><br><span class="line">               profile: default</span><br><span class="line">  modify PATH variable: yes</span><br><span class="line"></span><br><span class="line">1) Proceed with installation (default)</span><br><span class="line">2) Customize installation</span><br><span class="line">3) Cancel installation</span><br></pre></td></tr></table></figure>

<p>沒有特別要設定就選 1 吧</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&gt;1</span><br><span class="line"></span><br><span class="line">info: profile set to &#x27;default&#x27;</span><br><span class="line">info: default host triple is aarch64-apple-darwin</span><br><span class="line">info: syncing channel updates for &#x27;stable-aarch64-apple-darwin&#x27;</span><br><span class="line">781.5 KiB / 781.5 KiB (100 %) 699.0 KiB/s in  1s ETA:  0s</span><br><span class="line">info: latest update on 2023-08-03, rust version 1.71.1 (eb26296b5 2023-08-03)</span><br><span class="line">info: downloading component &#x27;cargo&#x27;</span><br><span class="line">  5.0 MiB /   5.0 MiB (100 %)   1.1 MiB/s in  4s ETA:  0s</span><br><span class="line">info: downloading component &#x27;clippy&#x27;</span><br><span class="line">  1.9 MiB /   1.9 MiB (100 %)   1.1 MiB/s in  1s ETA:  0s</span><br><span class="line">info: downloading component &#x27;rust-docs&#x27;</span><br><span class="line"> 13.6 MiB /  13.6 MiB (100 %)   1.6 MiB/s in 10s ETA:  0s</span><br><span class="line">info: downloading component &#x27;rust-std&#x27;</span><br><span class="line"> 23.7 MiB /  23.7 MiB (100 %)   1.9 MiB/s in 14s ETA:  0s</span><br><span class="line">info: downloading component &#x27;rustc&#x27;</span><br><span class="line"> 52.6 MiB /  52.6 MiB (100 %)   3.3 MiB/s in 27s ETA:  0s</span><br><span class="line">info: downloading component &#x27;rustfmt&#x27;</span><br><span class="line">  1.4 MiB /   1.4 MiB (100 %)   1.0 MiB/s in  2s ETA:  0s</span><br><span class="line">info: installing component &#x27;cargo&#x27;</span><br><span class="line">info: installing component &#x27;clippy&#x27;</span><br><span class="line">info: installing component &#x27;rust-docs&#x27;</span><br><span class="line"> 13.6 MiB /  13.6 MiB (100 %)   7.2 MiB/s in  1s ETA:  0s</span><br><span class="line">info: installing component &#x27;rust-std&#x27;</span><br><span class="line"> 23.7 MiB /  23.7 MiB (100 %)  19.2 MiB/s in  1s ETA:  0s</span><br><span class="line">info: installing component &#x27;rustc&#x27;</span><br><span class="line"> 52.6 MiB /  52.6 MiB (100 %)  21.6 MiB/s in  2s ETA:  0s</span><br><span class="line">info: installing component &#x27;rustfmt&#x27;</span><br><span class="line">info: default toolchain set to &#x27;stable-aarch64-apple-darwin&#x27;</span><br><span class="line"></span><br><span class="line">  stable-aarch64-apple-darwin installed - rustc 1.71.1 (eb26296b5 2023-08-03)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Rust is installed now. Great!</span><br><span class="line"></span><br><span class="line">To get started you may need to restart your current shell.</span><br><span class="line">This would reload your PATH environment variable to include</span><br><span class="line">Cargo&#x27;s bin directory ($HOME/.cargo/bin).</span><br><span class="line"></span><br><span class="line">To configure your current shell, run:</span><br><span class="line">source &quot;$HOME/.cargo/env&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>安裝完畢就可以確認安裝的版本（記得要重開終端機）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; rustc --version</span><br><span class="line"></span><br><span class="line"># rustc 1.80.1 (3f5fd8dd4 2024-08-06)</span><br></pre></td></tr></table></figure>


<h3 id="印出-Hello-World"><a href="#印出-Hello-World" class="headerlink" title="印出 Hello World"></a>印出 Hello World</h3><p>我們先來做一個 rs 檔案 ( Rust 的原始碼檔案) 吧</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch hello.rs</span><br></pre></td></tr></table></figure>

<p>打開 hello.rs 檔案，輸入下列這段程式碼後存檔</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    println!(&quot;Hello, World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Rust 是編譯語言，在進入執行其之前需要先編譯成電腦看得懂的語言，<br>所以我們用 rustc 來編譯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustc hello.rs</span><br></pre></td></tr></table></figure>

<p>接著執行這個檔案</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./hello.rs</span><br></pre></td></tr></table></figure>

<p>就會出現 <code>Hello, World!</code> 囉</p>
<h3 id="註解"><a href="#註解" class="headerlink" title="註解"></a>註解</h3><p>為了防止程式語言寫得過於艱深，或者是比較特殊的功能<br>我們會用註解 (comments) 來解釋程式碼</p>
<p>在 Rust 中，該怎麼下註解呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 這是單行註解</span><br><span class="line">/*...*/ 這是多行註解</span><br></pre></td></tr></table></figure>

<p>以剛剛的 hello.rs 來示範單行註解</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    // first, say hello to the world.</span><br><span class="line">    println!(&quot;Hello, World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那多行註解呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    /* </span><br><span class="line">    I&#x27;m beginner of rust,</span><br><span class="line">    but I&#x27;ll work hard!</span><br><span class="line">    */</span><br><span class="line">    println!(&quot;Hello, World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>寫好再重新編譯，結果依然是印出 Hello, World! 唷</p>
<h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>在 Rust 中，要印出東西，可以用兩種 macro，<br>分別是 print! 跟 println!</p>
<ul>
<li>什麼是 macro?</li>
</ul>
<p>我們直接在 hello.rs 中試試</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  print!(&quot;Hello,&quot;);</span><br><span class="line">  print!(&quot;World!&quot;);</span><br><span class="line">  </span><br><span class="line">  println!(&quot;Hello,&quot;);</span><br><span class="line">  println!(&quot;World!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一樣編譯後再執行，這時候終端機的結果是這樣：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello,World!Hello,</span><br><span class="line">World!</span><br></pre></td></tr></table></figure>

<p>由上述結果可知道 <code>print!</code> 不會換行<br><code>ln</code> 會在後面加上換行的動作<br>所以 <code>println!</code> 會換行</p>
<p>不過這個只能印字串，如果要印變數，必須這樣使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let a = &quot;Hello&quot;;</span><br><span class="line">println!(&quot;&#123;&#125;&quot;, a);</span><br></pre></td></tr></table></figure>

<p>有時候會跑出該型態不支援預設 formatter 的錯誤，這時我們就必須這樣用</p>
<p>cannot be formatted with the default formatter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let a = [1, 2, 3];</span><br><span class="line">println!(&quot;&#123;:?&#125;&quot;, a);</span><br></pre></td></tr></table></figure>

<h3 id="變數"><a href="#變數" class="headerlink" title="變數"></a>變數</h3><p>當我們需要將一個值儲存起來，在日後做使用的時候，我們就需要用到變數</p>
<p>將變數指向這個值，需要的時候再拿出來用他</p>
<p>我們來看一下在 Rust 中該怎麼定義變數</p>
<h4 id="定義變數"><a href="#定義變數" class="headerlink" title="定義變數"></a>定義變數</h4><p>我們會用 <code>let</code> 來定義變數 (有點像 JavaScript)，來看看以下範例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let aa = 1;</span><br></pre></td></tr></table></figure>

<p>我們會定義出一個 aa 的變數，並將它的值指向 1</p>
<p>接下來我們試著印出變數</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let age = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line">$ ./main</span><br><span class="line"></span><br><span class="line"># 18</span><br></pre></td></tr></table></figure>

<p>Rust 對於變數相對嚴謹，基本上定義後就不能再改變</p>
<p>如果有天突然想給他改值呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let age = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line"></span><br><span class="line">error[E0384]: cannot assign twice to immutable variable `age`</span><br><span class="line"> --&gt; main.rs:5:3</span><br><span class="line">  |</span><br><span class="line">2 |   let age = 18;</span><br><span class="line">  |       ---</span><br><span class="line">  |       |</span><br><span class="line">  |       first assignment to `age`</span><br><span class="line">  |       help: consider making this binding mutable: `mut age`</span><br><span class="line">...</span><br><span class="line">5 |   age = 19;</span><br><span class="line">  |   ^^^^^^^^ cannot assign twice to immutable variable</span><br><span class="line"></span><br><span class="line">error: aborting due to previous error</span><br><span class="line"></span><br><span class="line">For more information about this error, try `rustc --explain E0384`.</span><br></pre></td></tr></table></figure>

<p>在編譯的時候就直接噴錯</p>
<p>但我們一定會需要改變變數值的時候，該怎麼做呢？</p>
<p>使用 <code>mut</code> 就可以定義一個可變的變數</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let mut age = 18;</span><br></pre></td></tr></table></figure>

<p>我們實際來試試</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let mut age = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, age);</span><br><span class="line"></span><br><span class="line">  age = 19;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line">$ ./main</span><br><span class="line"></span><br><span class="line"># 18</span><br><span class="line"># 19</span><br></pre></td></tr></table></figure>

<p>以上是 Rust 定義變數的方式</p>
<h4 id="變數命名規則"><a href="#變數命名規則" class="headerlink" title="變數命名規則"></a>變數命名規則</h4><p>在 Rust 中，大寫與小寫是不同的，所以 age !&#x3D; AGE</p>
<p>還有幾個規則務必要遵守</p>
<ul>
<li>開頭不可用數字</li>
<li>除了英文 &#x2F; 數字 &#x2F; 底線以外，不可加入其他符號或語言文字</li>
<li>如果會有兩個以上的單字，請用蛇式命名法，比如說變數名稱是我的年齡，可取作 my_age</li>
</ul>
<h3 id="常數是什麼"><a href="#常數是什麼" class="headerlink" title="常數是什麼"></a>常數是什麼</h3><p>常數顧名思義就是永恆不變的，所以基本上他是不能被改變的</p>
<h3 id="定義常數"><a href="#定義常數" class="headerlink" title="定義常數"></a>定義常數</h3><p>在 Rust 中定義常數的方式跟 JavaScript 很像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const PI: f32 = 3.14;</span><br></pre></td></tr></table></figure>

<ul>
<li>定義方式：使用 const</li>
<li>名稱：const 後面必須接大寫</li>
<li>指定型別：需指定型別給它，否則他會自行判斷，稍後我們會介紹型別</li>
</ul>
<p>之後再賦予一個值給常數即可</p>
<p>我們來試試印出常數</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  const AGE: i8 = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, AGE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line">$ ./main</span><br><span class="line"></span><br><span class="line"># 18</span><br></pre></td></tr></table></figure>

<p>如果我們想改常數的值呢？會發生什麼事</p>
<p>應該想都不用想就是會噴錯，不過會噴什麼錯誤呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  const AGE: i8 = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, AGE);</span><br><span class="line"></span><br><span class="line">  AGE = 19;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, AGE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line"></span><br><span class="line">error[E0070]: invalid left-hand side of assignment</span><br><span class="line"> --&gt; main.rs:5:7</span><br><span class="line">  |</span><br><span class="line">5 |   AGE = 19;</span><br><span class="line">  |   --- ^</span><br><span class="line">  |   |</span><br><span class="line">  |   cannot assign to this expression</span><br><span class="line"></span><br><span class="line">error: aborting due to previous error</span><br><span class="line"></span><br><span class="line">For more information about this error, try `rustc --explain E0070`.</span><br></pre></td></tr></table></figure>

<p>它會跟你說左邊的定義是不合法的唷！</p>
<h3 id="基本型別"><a href="#基本型別" class="headerlink" title="基本型別"></a>基本型別</h3><p>Rust 屬於強型別語言，必須明確定義型別給它，否則他會自行判斷型別</p>
<p>我們剛剛在定義常數的時候有加上了型別，相信大家在定義的時候知道怎麼加入型別了</p>
<p>所以就來看一下基本型別有哪些吧！</p>
<ul>
<li>整數 Integer</li>
<li>浮點數 Floating-Point</li>
<li>布林值 Boolean</li>
<li>字 Character</li>
</ul>
<h4 id="整數-Integer"><a href="#整數-Integer" class="headerlink" title="整數 Integer"></a>整數 Integer</h4><p>年齡都是用整數來算，用以下範例來舉例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let age: i8 = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>來一一拆解一下</p>
<p><code>i</code> 指的是 integer<br><code>8</code> 指的是 在記憶體中佔據 8 bits</p>
<p>如果今天要存取的數字比較大，可以用 <code>32</code> <code>64</code><br>不管是正數還是負數都算在 integer 的型別範圍內</p>
<p>假設今天要指定這個型別只能為正數，我們需把 <code>i</code> 換成 <code>u</code> 就可以囉</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let age: i8 = 18;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 結果： 18</span><br></pre></td></tr></table></figure>

<p>如果把它定義成負數會怎樣呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let price: u32 = -100;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, price);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ rustc main.rs</span><br><span class="line"></span><br><span class="line">error[E0600]: cannot apply unary operator `-` to type `u32`</span><br><span class="line"> --&gt; main.rs:2:20</span><br><span class="line">  |</span><br><span class="line">2 |   let price: u32 = -100;</span><br><span class="line">  |                    ^^^^ cannot apply unary operator `-`</span><br><span class="line">  |</span><br><span class="line">  = note: unsigned values cannot be negated</span><br><span class="line"></span><br><span class="line">error: aborting due to previous error</span><br><span class="line"></span><br><span class="line">For more information about this error, try `rustc --explain E0600`.</span><br></pre></td></tr></table></figure>

<p>會出現不可以加上 <code>-</code> 的錯誤訊息哦！</p>
<h4 id="浮點數-Floating-Point"><a href="#浮點數-Floating-Point" class="headerlink" title="浮點數 Floating-Point"></a>浮點數 Floating-Point</h4><p>浮點數有 32 bits 跟 64 bits 兩種選項，小數點後面的位數越多，要使用的 bits 數就要越大 (因為要存在記憶體中)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let product_price: f32 = 5.5;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, product_price);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 結果： 5.5</span><br></pre></td></tr></table></figure>

<h4 id="布林值-Boolean"><a href="#布林值-Boolean" class="headerlink" title="布林值 Boolean"></a>布林值 Boolean</h4><p>布林值的定義很簡單，只要加上 <code>bool</code> 即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let have_fun: bool = true;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, have_fun);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 結果： true</span><br></pre></td></tr></table></figure>

<h4 id="字-Character"><a href="#字-Character" class="headerlink" title="字 Character"></a>字 Character</h4><p>我們可以定義任何符號，甚至是數字為字的型別，型別設定為 <code>char</code> 即可<br>但只能放<code>一個字</code>喔，後面務必要用<code>單引號</code>，雙引號是用來定義字串的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  let money: char = &#x27;$&#x27;;</span><br><span class="line">  println!(&quot;&#123;&#125;&quot;, money);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 結果： $</span><br></pre></td></tr></table></figure>

<p>型別一旦定義後就不能再變了嗎？ Rust 提供了變換型別的方法，下一篇將介紹型別轉換方法！</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2024-09-06</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Rust/" title="Rust">Rust </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://ninglab.com/成為程式界的 F1 賽車手 - Rust 與變數們/,NingLab,成為程式界的 F1 賽車手 - Rust 與變數們,;"></a></div></div><div><script src="https://utteranc.es/client.js" repo="cacachang/cacachang.github.io" issue-term="title" theme="github-light" crossorigin="anonymous" async></script></div><div><script type="text/javascript">document.write("<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/a24701770/button?referrer=" + encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");</script></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/AWS-vpc-and-public-subnet/" title="AWS 小探險 - 建立 VPC 與 Public Subnet">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>